{"failedCount":0,"prefixedPath":"classpath:features\/test-product.feature","packageQualifiedName":"features.test-product","loopIndex":-1,"relativePath":"features\/test-product.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2405500,"startTime":1763554544222,"endTime":1763554544224,"millis":2.4055,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":39705700,"startTime":1763554544227,"endTime":1763554544267,"millis":39.7057,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"configure headers = { 'Content-Type': 'application\/json; charset=UTF-8' }"}},{"result":{"nanos":789900,"startTime":1763554544267,"endTime":1763554544268,"millis":0.7899,"status":"passed"},"step":{"comments":["# --- 1) GET listado completo ---"],"line":9,"prefix":"Given","index":0,"text":"path 'objects'"}},{"result":{"nanos":1427745000,"startTime":1763554544268,"endTime":1763554545696,"millis":1427.745,"status":"passed"},"step":{"line":10,"prefix":"When","index":1,"text":"method GET"},"stepLog":"09:15:44.606 request:\n1 > GET https:\/\/api.restful-api.dev\/objects\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Host: api.restful-api.dev\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/25)\n1 > Accept-Encoding: gzip,deflate\n\n\n09:15:45.691 response time in milliseconds: 1077\n1 < 200\n1 < Date: Wed, 19 Nov 2025 12:15:47 GMT\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Connection: keep-alive\n1 < Server: cloudflare\n1 < Nel: {\"report_to\":\"cf-nel\",\"success_fraction\":0.0,\"max_age\":604800}\n1 < Vary: Origin\n1 < Vary: Access-Control-Request-Method\n1 < Vary: Access-Control-Request-Headers\n1 < cf-cache-status: DYNAMIC\n1 < Server-Timing: cfCacheStatus;desc=\"DYNAMIC\"\n1 < Server-Timing: cfEdge;dur=299,cfOrigin;dur=78\n1 < Report-To: {\"group\":\"cf-nel\",\"max_age\":604800,\"endpoints\":[{\"url\":\"https:\/\/a.nel.cloudflare.com\/report\/v4?s=Rq4q4xl6vCwOzJbk6rDZyOucvdtgWtCNvUgoP2Lx9Jqyz0ONAzPuPL5ZdJ4GQJFVJl1GxrhK2d%2B3uXPpXoxgXNkjCqOVuzimVDrwaYuvqQoqda4%3D\"}]}\n1 < CF-RAY: 9a0fa28daec2ca87-GIG\n1 < alt-svc: h3=\":443\"; ma=86400\n[\n  {\n    \"id\": \"1\",\n    \"name\": \"Google Pixel 6 Pro\",\n    \"data\": {\n      \"color\": \"Cloudy White\",\n      \"capacity\": \"128 GB\"\n    }\n  },\n  {\n    \"id\": \"2\",\n    \"name\": \"Apple iPhone 12 Mini, 256GB, Blue\",\n    \"data\": null\n  },\n  {\n    \"id\": \"3\",\n    \"name\": \"Apple iPhone 12 Pro Max\",\n    \"data\": {\n      \"color\": \"Cloudy White\",\n      \"capacity GB\": 512\n    }\n  },\n  {\n    \"id\": \"4\",\n    \"name\": \"Apple iPhone 11, 64GB\",\n    \"data\": {\n      \"price\": 389.99,\n      \"color\": \"Purple\"\n    }\n  },\n  {\n    \"id\": \"5\",\n    \"name\": \"Samsung Galaxy Z Fold2\",\n    \"data\": {\n      \"price\": 689.99,\n      \"color\": \"Brown\"\n    }\n  },\n  {\n    \"id\": \"6\",\n    \"name\": \"Apple AirPods\",\n    \"data\": {\n      \"generation\": \"3rd\",\n      \"price\": 120\n    }\n  },\n  {\n    \"id\": \"7\",\n    \"name\": \"Apple MacBook Pro 16\",\n    \"data\": {\n      \"year\": 2019,\n      \"price\": 1849.99,\n      \"CPU model\": \"Intel Core i9\",\n      \"Hard disk size\": \"1 TB\"\n    }\n  },\n  {\n    \"id\": \"8\",\n    \"name\": \"Apple Watch Series 8\",\n    \"data\": {\n      \"Strap Colour\": \"Elderberry\",\n      \"Case Size\": \"41mm\"\n    }\n  },\n  {\n    \"id\": \"9\",\n    \"name\": \"Beats Studio3 Wireless\",\n    \"data\": {\n      \"Color\": \"Red\",\n      \"Description\": \"High-performance wireless noise cancelling headphones\"\n    }\n  },\n  {\n    \"id\": \"10\",\n    \"name\": \"Apple iPad Mini 5th Gen\",\n    \"data\": {\n      \"Capacity\": \"64 GB\",\n      \"Screen size\": 7.9\n    }\n  },\n  {\n    \"id\": \"11\",\n    \"name\": \"Apple iPad Mini 5th Gen\",\n    \"data\": {\n      \"Capacity\": \"254 GB\",\n      \"Screen size\": 7.9\n    }\n  },\n  {\n    \"id\": \"12\",\n    \"name\": \"Apple iPad Air\",\n    \"data\": {\n      \"Generation\": \"4th\",\n      \"Price\": \"419.99\",\n      \"Capacity\": \"64 GB\"\n    }\n  },\n  {\n    \"id\": \"13\",\n    \"name\": \"Apple iPad Air\",\n    \"data\": {\n      \"Generation\": \"4th\",\n      \"Price\": \"519.99\",\n      \"Capacity\": \"256 GB\"\n    }\n  }\n]\n\n\n"},{"result":{"nanos":5318200,"startTime":1763554545696,"endTime":1763554545701,"millis":5.3182,"status":"passed"},"step":{"line":11,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":15571800,"startTime":1763554545702,"endTime":1763554545718,"millis":15.5718,"status":"passed"},"step":{"comments":["# Validar que la respuesta es una lista (posiblemente vacía)"],"line":13,"prefix":"*","index":3,"text":"match response == '#[]'"}},{"result":{"nanos":1278900,"startTime":1763554545717,"endTime":1763554545718,"millis":1.2789,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def products = response"}},{"result":{"nanos":17644800,"startTime":1763554545718,"endTime":1763554545736,"millis":17.6448,"status":"passed"},"step":{"comments":["# Validar que todas las entradas tienen la estructura esperada y data sea un objeto","#* match each products contains { id: '#string', name: '#string', data: '#object' }","# Validar que todas las entradas tienen la estructura esperada y data sea un objeto opcional, es decir puede venir null"],"line":19,"prefix":"*","index":5,"text":"match each products contains { id: '#string', name: '#string', data: '##object' }"}},{"result":{"nanos":71132700,"startTime":1763554545737,"endTime":1763554545808,"millis":71.1327,"status":"passed"},"step":{"comments":["# Reglas de integridad con loops y condicionales","# 1. IDs únicos y numéricos"],"line":23,"prefix":"*","index":6,"text":"def ids = products.map(x => x.id)"}},{"result":{"nanos":4108300,"startTime":1763554545808,"endTime":1763554545812,"millis":4.1083,"status":"passed"},"step":{"line":24,"prefix":"*","index":7,"text":"def uniqueIds = karate.distinct(ids)"}},{"result":{"nanos":6141400,"startTime":1763554545811,"endTime":1763554545817,"millis":6.1414,"status":"passed"},"step":{"line":25,"prefix":"*","index":8,"text":"if (ids.length != uniqueIds.length) karate.fail('❌ IDs duplicados en listado')"}},{"result":{"nanos":143946400,"startTime":1763554545818,"endTime":1763554545962,"millis":143.9464,"status":"passed"},"step":{"line":26,"prefix":"*","index":9,"text":"karate.forEach(ids, function(v){ if (!\/^[0-9]+$\/.test(v)) karate.fail('❌ ID no numérico: ' + v) })"}},{"result":{"nanos":10845900,"startTime":1763554545962,"endTime":1763554545973,"millis":10.8459,"status":"passed"},"step":{"endLine":37,"comments":["# 2. data.price > 0 cuando price es #number"],"line":30,"prefix":"*","docString":"function(item){\n  if (item.data && typeof item.data.price === 'number' && !(item.data.price > 0)) {\n    karate.fail('❌ price inválido para id=' + item.id + ' -> ' + item.data.price);\n  }\n}","index":10,"text":"def dataPrice ="}},{"result":{"nanos":5668500,"startTime":1763554545974,"endTime":1763554545980,"millis":5.6685,"status":"passed"},"step":{"line":38,"prefix":"*","index":11,"text":"karate.forEach(products, dataPrice)"}},{"result":{"nanos":8801100,"startTime":1763554545979,"endTime":1763554545988,"millis":8.8011,"status":"passed"},"step":{"endLine":52,"comments":["# 3. Campos numéricos esperados si existen (capacity GB, Screen size)"],"line":41,"prefix":"*","docString":"function(item){\n  if (item.data && item.data['capacity GB'] !== undefined && typeof item.data['capacity GB'] !== 'number') {\n    karate.fail('❌ capacity GB debe ser number en id=' + item.id);\n  }\n  if (item.data && item.data['Screen size'] !== undefined && typeof item.data['Screen size'] !== 'number') {\n    karate.fail('❌ Screen size debe ser number en id=' + item.id);\n  }\n}","index":12,"text":"def dataCapacityScreenSize ="}},{"result":{"nanos":7777400,"startTime":1763554545988,"endTime":1763554545996,"millis":7.7774,"status":"passed"},"step":{"line":54,"prefix":"*","index":13,"text":"karate.forEach(products,dataCapacityScreenSize)"}},{"result":{"nanos":1212300,"startTime":1763554545996,"endTime":1763554545997,"millis":1.2123,"status":"passed"},"step":{"comments":["# --- 2) PATCH parcial al producto indicado ---","# Localiza el producto objetivo antes del parche (para comparar luego)"],"line":58,"prefix":"*","index":14,"text":"def targetId = 'ff8081819782e69e019a546020375f4f'"}},{"result":{"nanos":610600,"startTime":1763554545997,"endTime":1763554545998,"millis":0.6106,"status":"passed"},"step":{"line":59,"prefix":"*","index":15,"text":"def before = response"}},{"result":{"nanos":5078100,"startTime":1763554545998,"endTime":1763554546003,"millis":5.0781,"status":"passed"},"step":{"line":60,"prefix":"*","index":16,"text":"print 'Producto ANTES del PATCH =>', before"},"stepLog":"09:15:46.003 [print] Producto ANTES del PATCH => [\n  {\n    \"id\": \"1\",\n    \"name\": \"Google Pixel 6 Pro\",\n    \"data\": {\n      \"color\": \"Cloudy White\",\n      \"capacity\": \"128 GB\"\n    }\n  },\n  {\n    \"id\": \"2\",\n    \"name\": \"Apple iPhone 12 Mini, 256GB, Blue\",\n    \"data\": null\n  },\n  {\n    \"id\": \"3\",\n    \"name\": \"Apple iPhone 12 Pro Max\",\n    \"data\": {\n      \"color\": \"Cloudy White\",\n      \"capacity GB\": 512\n    }\n  },\n  {\n    \"id\": \"4\",\n    \"name\": \"Apple iPhone 11, 64GB\",\n    \"data\": {\n      \"price\": 389.99,\n      \"color\": \"Purple\"\n    }\n  },\n  {\n    \"id\": \"5\",\n    \"name\": \"Samsung Galaxy Z Fold2\",\n    \"data\": {\n      \"price\": 689.99,\n      \"color\": \"Brown\"\n    }\n  },\n  {\n    \"id\": \"6\",\n    \"name\": \"Apple AirPods\",\n    \"data\": {\n      \"generation\": \"3rd\",\n      \"price\": 120\n    }\n  },\n  {\n    \"id\": \"7\",\n    \"name\": \"Apple MacBook Pro 16\",\n    \"data\": {\n      \"year\": 2019,\n      \"price\": 1849.99,\n      \"CPU model\": \"Intel Core i9\",\n      \"Hard disk size\": \"1 TB\"\n    }\n  },\n  {\n    \"id\": \"8\",\n    \"name\": \"Apple Watch Series 8\",\n    \"data\": {\n      \"Strap Colour\": \"Elderberry\",\n      \"Case Size\": \"41mm\"\n    }\n  },\n  {\n    \"id\": \"9\",\n    \"name\": \"Beats Studio3 Wireless\",\n    \"data\": {\n      \"Color\": \"Red\",\n      \"Description\": \"High-performance wireless noise cancelling headphones\"\n    }\n  },\n  {\n    \"id\": \"10\",\n    \"name\": \"Apple iPad Mini 5th Gen\",\n    \"data\": {\n      \"Capacity\": \"64 GB\",\n      \"Screen size\": 7.9\n    }\n  },\n  {\n    \"id\": \"11\",\n    \"name\": \"Apple iPad Mini 5th Gen\",\n    \"data\": {\n      \"Capacity\": \"254 GB\",\n      \"Screen size\": 7.9\n    }\n  },\n  {\n    \"id\": \"12\",\n    \"name\": \"Apple iPad Air\",\n    \"data\": {\n      \"Generation\": \"4th\",\n      \"Price\": \"419.99\",\n      \"Capacity\": \"64 GB\"\n    }\n  },\n  {\n    \"id\": \"13\",\n    \"name\": \"Apple iPad Air\",\n    \"data\": {\n      \"Generation\": \"4th\",\n      \"Price\": \"519.99\",\n      \"Capacity\": \"256 GB\"\n    }\n  }\n]\n \n"},{"result":{"nanos":1691600,"startTime":1763554546003,"endTime":1763554546005,"millis":1.6916,"status":"passed"},"step":{"comments":["# Construcción dinámica del payload PATCH:","# - Si el campo a parchear es en 'data', se envía { data: { <clave>: <valor> } }","# - Si es 'name', se envía { name: <valor> }"],"line":64,"prefix":"*","index":17,"text":"def patchField = 'name'"}},{"result":{"nanos":824400,"startTime":1763554546005,"endTime":1763554546006,"millis":0.8244,"status":"passed"},"step":{"line":65,"prefix":"*","index":18,"text":"def patchValue = 'Apple MacBook X'"}},{"result":{"nanos":4223200,"startTime":1763554546006,"endTime":1763554546010,"millis":4.2232,"status":"passed"},"step":{"endLine":74,"line":66,"prefix":"*","docString":"function(field, value){\n  if (field === 'name') return { name: value };\n  var o = {};\n  o[field] = value;\n  return { data: o };\n}","index":19,"text":"def patchBody ="}},{"result":{"nanos":8687100,"startTime":1763554546010,"endTime":1763554546019,"millis":8.6871,"status":"passed"},"step":{"line":75,"prefix":"*","index":20,"text":"def body = patchBody(patchField, patchValue)"}},{"result":{"nanos":2211000,"startTime":1763554546019,"endTime":1763554546021,"millis":2.211,"status":"passed"},"step":{"line":76,"prefix":"*","index":21,"text":"print 'PATCH body =>', body"},"stepLog":"09:15:46.021 [print] PATCH body => {\n  \"name\": \"Apple MacBook X\"\n}\n \n"},{"result":{"nanos":6527500,"startTime":1763554546021,"endTime":1763554546028,"millis":6.5275,"status":"passed"},"step":{"line":78,"prefix":"Given","index":22,"text":"path 'objects', targetId"}},{"result":{"nanos":655400,"startTime":1763554546028,"endTime":1763554546029,"millis":0.6554,"status":"passed"},"step":{"line":79,"prefix":"And","index":23,"text":"request body"}},{"result":{"nanos":683593600,"startTime":1763554546028,"endTime":1763554546712,"millis":683.5936,"status":"passed"},"step":{"line":80,"prefix":"When","index":24,"text":"method PATCH"},"stepLog":"09:15:46.092 request:\n2 > PATCH https:\/\/api.restful-api.dev\/objects\/ff8081819782e69e019a546020375f4f\n2 > Content-Type: application\/json; charset=UTF-8\n2 > Content-Length: 26\n2 > Host: api.restful-api.dev\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/25)\n2 > Accept-Encoding: gzip,deflate\n{\n  \"name\": \"Apple MacBook X\"\n}\n\n\n09:15:46.707 response time in milliseconds: 611\n2 < 200\n2 < Date: Wed, 19 Nov 2025 12:15:48 GMT\n2 < Content-Type: application\/json\n2 < Transfer-Encoding: chunked\n2 < Connection: keep-alive\n2 < Server: cloudflare\n2 < Nel: {\"report_to\":\"cf-nel\",\"success_fraction\":0.0,\"max_age\":604800}\n2 < Vary: Origin\n2 < Vary: Access-Control-Request-Method\n2 < Vary: Access-Control-Request-Headers\n2 < cf-cache-status: DYNAMIC\n2 < Server-Timing: cfCacheStatus;desc=\"DYNAMIC\"\n2 < Server-Timing: cfEdge;dur=285,cfOrigin;dur=83\n2 < Report-To: {\"group\":\"cf-nel\",\"max_age\":604800,\"endpoints\":[{\"url\":\"https:\/\/a.nel.cloudflare.com\/report\/v4?s=e0ZACiZKo0W4RjEQQCJkMxtYa%2Ba7rmS4ihUvChiDpgolqoTlp2l2AwV460Nm%2B4IIClweACoShAPSdmFIQFMlOYEaUtjz%2Bgtch0hJwhuWYseSPOA%3D\"}]}\n2 < CF-RAY: 9a0fa2945a253214-GIG\n2 < alt-svc: h3=\":443\"; ma=86400\n{\n  \"id\": \"ff8081819782e69e019a546020375f4f\",\n  \"name\": \"Apple MacBook X\",\n  \"updatedAt\": \"2025-11-19T12:15:48.092+00:00\",\n  \"data\": {\n    \"year\": 2021,\n    \"price\": 1000,\n    \"CPUmodel\": \"Intel i5\",\n    \"hardDiskSize\": \"1 TB\"\n  }\n}\n\n\n"},{"result":{"nanos":39300,"startTime":1763554546712,"endTime":1763554546712,"millis":0.0393,"status":"passed"},"step":{"line":81,"prefix":"Then","index":25,"text":"status 200"}},{"result":{"nanos":1480200,"startTime":1763554546713,"endTime":1763554546714,"millis":1.4802,"status":"passed"},"step":{"comments":["# --- 3) Verificación por GET del recurso parchado ---"],"line":84,"prefix":"Given","index":26,"text":"path 'objects'"}},{"result":{"nanos":2760700,"startTime":1763554546714,"endTime":1763554546717,"millis":2.7607,"status":"passed"},"step":{"line":85,"prefix":"And","index":27,"text":"param id = targetId"}},{"result":{"nanos":805207100,"startTime":1763554546718,"endTime":1763554547523,"millis":805.2071,"status":"passed"},"step":{"line":86,"prefix":"When","index":28,"text":"method GET"},"stepLog":"09:15:46.725 request:\n3 > GET https:\/\/api.restful-api.dev\/objects?id=ff8081819782e69e019a546020375f4f\n3 > Content-Type: application\/json; charset=UTF-8\n3 > Host: api.restful-api.dev\n3 > Connection: Keep-Alive\n3 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/25)\n3 > Accept-Encoding: gzip,deflate\n\n\n09:15:47.520 response time in milliseconds: 792\n3 < 200\n3 < Date: Wed, 19 Nov 2025 12:15:49 GMT\n3 < Content-Type: application\/json\n3 < Transfer-Encoding: chunked\n3 < Connection: keep-alive\n3 < Server: cloudflare\n3 < Nel: {\"report_to\":\"cf-nel\",\"success_fraction\":0.0,\"max_age\":604800}\n3 < Vary: Origin\n3 < Vary: Access-Control-Request-Method\n3 < Vary: Access-Control-Request-Headers\n3 < cf-cache-status: DYNAMIC\n3 < Server-Timing: cfCacheStatus;desc=\"DYNAMIC\"\n3 < Server-Timing: cfEdge;dur=518,cfOrigin;dur=64\n3 < Report-To: {\"group\":\"cf-nel\",\"max_age\":604800,\"endpoints\":[{\"url\":\"https:\/\/a.nel.cloudflare.com\/report\/v4?s=dZ%2FXCv9FtjVc%2FWPBDvgRmpnSUSLmGV1QtWyfOV6sCBovtiPsoXeM5vUvL0HGDIIe1wTCPNWn7U35t0uljGbjkf0J6Mc6nIDQvcPjsVzwdXmD\"}]}\n3 < CF-RAY: 9a0fa2985b48b51a-SCL\n3 < alt-svc: h3=\":443\"; ma=86400\n[\n  {\n    \"id\": \"ff8081819782e69e019a546020375f4f\",\n    \"name\": \"Apple MacBook X\",\n    \"data\": {\n      \"year\": 2021,\n      \"price\": 1000,\n      \"CPUmodel\": \"Intel i5\",\n      \"hardDiskSize\": \"1 TB\"\n    }\n  }\n]\n\n\n"},{"result":{"nanos":20600,"startTime":1763554547523,"endTime":1763554547523,"millis":0.0206,"status":"passed"},"step":{"line":87,"prefix":"Then","index":29,"text":"status 200"}},{"result":{"nanos":4329700,"startTime":1763554547523,"endTime":1763554547527,"millis":4.3297,"status":"passed"},"step":{"line":88,"prefix":"*","index":30,"text":"match response == '#[1]'"}},{"result":{"nanos":2253000,"startTime":1763554547528,"endTime":1763554547530,"millis":2.253,"status":"passed"},"step":{"line":89,"prefix":"*","index":31,"text":"def after = response[0]"}},{"result":{"nanos":5712100,"startTime":1763554547530,"endTime":1763554547536,"millis":5.7121,"status":"passed"},"step":{"comments":["# Validación del valor parchado"],"line":92,"prefix":"*","index":32,"text":"if (patchField === 'name') karate.match(after.name, patchValue)"}},{"result":{"nanos":1620100,"startTime":1763554547536,"endTime":1763554547538,"millis":1.6201,"status":"passed"},"step":{"line":93,"prefix":"*","index":33,"text":"if (patchField !== 'name') karate.match(after.data[patchField], patchValue)"}},{"result":{"nanos":1241400,"startTime":1763554547538,"endTime":1763554547539,"millis":1.2414,"status":"passed"},"step":{"comments":["# Validar que lo no parchado se conserve (si existía)"],"line":96,"prefix":"*","index":34,"text":"if (patchField !== 'name' && before.name) karate.match(after.name, before.name)"}},{"result":{"nanos":2703600,"startTime":1763554547539,"endTime":1763554547542,"millis":2.7036,"status":"passed"},"step":{"line":97,"prefix":"*","index":35,"text":"if (patchField === 'name' && before.data) karate.match(after.data, '#object')"}}],"line":102,"description":"","durationMillis":3311.5641,"failed":false,"executorName":"main","name":"Listado completo (GET) + PATCH parcial y verificación","startTime":1763554543933,"refId":"[1.1:102]","endTime":1763554547542,"exampleData":{"patchId":"ff8081819782e69e019a546020375f4f","patchField":"name","patchValue":"'Apple MacBook X'"},"exampleIndex":0},{"sectionIndex":0,"stepResults":[{"result":{"nanos":1019600,"startTime":1763554547589,"endTime":1763554547590,"millis":1.0196,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":875400,"startTime":1763554547591,"endTime":1763554547592,"millis":0.8754,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"configure headers = { 'Content-Type': 'application\/json; charset=UTF-8' }"}},{"result":{"nanos":300300,"startTime":1763554547593,"endTime":1763554547593,"millis":0.3003,"status":"passed"},"step":{"comments":["# --- 1) GET listado completo ---"],"line":9,"prefix":"Given","index":0,"text":"path 'objects'"}},{"result":{"nanos":740854200,"startTime":1763554547593,"endTime":1763554548334,"millis":740.8542,"status":"passed"},"step":{"line":10,"prefix":"When","index":1,"text":"method GET"},"stepLog":"09:15:47.594 request:\n1 > GET https:\/\/api.restful-api.dev\/objects\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Host: api.restful-api.dev\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/25)\n1 > Accept-Encoding: gzip,deflate\n\n\n09:15:48.331 response time in milliseconds: 735\n1 < 200\n1 < Date: Wed, 19 Nov 2025 12:15:49 GMT\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Connection: keep-alive\n1 < Server: cloudflare\n1 < Nel: {\"report_to\":\"cf-nel\",\"success_fraction\":0.0,\"max_age\":604800}\n1 < Vary: Origin\n1 < Vary: Access-Control-Request-Method\n1 < Vary: Access-Control-Request-Headers\n1 < cf-cache-status: DYNAMIC\n1 < Server-Timing: cfCacheStatus;desc=\"DYNAMIC\"\n1 < Server-Timing: cfEdge;dur=475,cfOrigin;dur=62\n1 < Report-To: {\"group\":\"cf-nel\",\"max_age\":604800,\"endpoints\":[{\"url\":\"https:\/\/a.nel.cloudflare.com\/report\/v4?s=I768Egu1Q59r93%2BbrjCGDPgrGAPD6GBANpmjTES4JrTXZwfwYUnOM5aTmIMPTBsij9dfytQmItdFGLEZCcmrvTDDHoQkERkp5MYLmEyvrkgY\"}]}\n1 < CF-RAY: 9a0fa29d9a34eabb-SCL\n1 < alt-svc: h3=\":443\"; ma=86400\n[\n  {\n    \"id\": \"1\",\n    \"name\": \"Google Pixel 6 Pro\",\n    \"data\": {\n      \"color\": \"Cloudy White\",\n      \"capacity\": \"128 GB\"\n    }\n  },\n  {\n    \"id\": \"2\",\n    \"name\": \"Apple iPhone 12 Mini, 256GB, Blue\",\n    \"data\": null\n  },\n  {\n    \"id\": \"3\",\n    \"name\": \"Apple iPhone 12 Pro Max\",\n    \"data\": {\n      \"color\": \"Cloudy White\",\n      \"capacity GB\": 512\n    }\n  },\n  {\n    \"id\": \"4\",\n    \"name\": \"Apple iPhone 11, 64GB\",\n    \"data\": {\n      \"price\": 389.99,\n      \"color\": \"Purple\"\n    }\n  },\n  {\n    \"id\": \"5\",\n    \"name\": \"Samsung Galaxy Z Fold2\",\n    \"data\": {\n      \"price\": 689.99,\n      \"color\": \"Brown\"\n    }\n  },\n  {\n    \"id\": \"6\",\n    \"name\": \"Apple AirPods\",\n    \"data\": {\n      \"generation\": \"3rd\",\n      \"price\": 120\n    }\n  },\n  {\n    \"id\": \"7\",\n    \"name\": \"Apple MacBook Pro 16\",\n    \"data\": {\n      \"year\": 2019,\n      \"price\": 1849.99,\n      \"CPU model\": \"Intel Core i9\",\n      \"Hard disk size\": \"1 TB\"\n    }\n  },\n  {\n    \"id\": \"8\",\n    \"name\": \"Apple Watch Series 8\",\n    \"data\": {\n      \"Strap Colour\": \"Elderberry\",\n      \"Case Size\": \"41mm\"\n    }\n  },\n  {\n    \"id\": \"9\",\n    \"name\": \"Beats Studio3 Wireless\",\n    \"data\": {\n      \"Color\": \"Red\",\n      \"Description\": \"High-performance wireless noise cancelling headphones\"\n    }\n  },\n  {\n    \"id\": \"10\",\n    \"name\": \"Apple iPad Mini 5th Gen\",\n    \"data\": {\n      \"Capacity\": \"64 GB\",\n      \"Screen size\": 7.9\n    }\n  },\n  {\n    \"id\": \"11\",\n    \"name\": \"Apple iPad Mini 5th Gen\",\n    \"data\": {\n      \"Capacity\": \"254 GB\",\n      \"Screen size\": 7.9\n    }\n  },\n  {\n    \"id\": \"12\",\n    \"name\": \"Apple iPad Air\",\n    \"data\": {\n      \"Generation\": \"4th\",\n      \"Price\": \"419.99\",\n      \"Capacity\": \"64 GB\"\n    }\n  },\n  {\n    \"id\": \"13\",\n    \"name\": \"Apple iPad Air\",\n    \"data\": {\n      \"Generation\": \"4th\",\n      \"Price\": \"519.99\",\n      \"Capacity\": \"256 GB\"\n    }\n  }\n]\n\n\n"},{"result":{"nanos":20200,"startTime":1763554548334,"endTime":1763554548334,"millis":0.0202,"status":"passed"},"step":{"line":11,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":787100,"startTime":1763554548334,"endTime":1763554548335,"millis":0.7871,"status":"passed"},"step":{"comments":["# Validar que la respuesta es una lista (posiblemente vacía)"],"line":13,"prefix":"*","index":3,"text":"match response == '#[]'"}},{"result":{"nanos":470100,"startTime":1763554548335,"endTime":1763554548335,"millis":0.4701,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def products = response"}},{"result":{"nanos":8280900,"startTime":1763554548335,"endTime":1763554548343,"millis":8.2809,"status":"passed"},"step":{"comments":["# Validar que todas las entradas tienen la estructura esperada y data sea un objeto","#* match each products contains { id: '#string', name: '#string', data: '#object' }","# Validar que todas las entradas tienen la estructura esperada y data sea un objeto opcional, es decir puede venir null"],"line":19,"prefix":"*","index":5,"text":"match each products contains { id: '#string', name: '#string', data: '##object' }"}},{"result":{"nanos":2921900,"startTime":1763554548344,"endTime":1763554548347,"millis":2.9219,"status":"passed"},"step":{"comments":["# Reglas de integridad con loops y condicionales","# 1. IDs únicos y numéricos"],"line":23,"prefix":"*","index":6,"text":"def ids = products.map(x => x.id)"}},{"result":{"nanos":1292800,"startTime":1763554548347,"endTime":1763554548348,"millis":1.2928,"status":"passed"},"step":{"line":24,"prefix":"*","index":7,"text":"def uniqueIds = karate.distinct(ids)"}},{"result":{"nanos":345400,"startTime":1763554548348,"endTime":1763554548348,"millis":0.3454,"status":"passed"},"step":{"line":25,"prefix":"*","index":8,"text":"if (ids.length != uniqueIds.length) karate.fail('❌ IDs duplicados en listado')"}},{"result":{"nanos":6581500,"startTime":1763554548349,"endTime":1763554548356,"millis":6.5815,"status":"passed"},"step":{"line":26,"prefix":"*","index":9,"text":"karate.forEach(ids, function(v){ if (!\/^[0-9]+$\/.test(v)) karate.fail('❌ ID no numérico: ' + v) })"}},{"result":{"nanos":1031700,"startTime":1763554548355,"endTime":1763554548356,"millis":1.0317,"status":"passed"},"step":{"endLine":37,"comments":["# 2. data.price > 0 cuando price es #number"],"line":30,"prefix":"*","docString":"function(item){\n  if (item.data && typeof item.data.price === 'number' && !(item.data.price > 0)) {\n    karate.fail('❌ price inválido para id=' + item.id + ' -> ' + item.data.price);\n  }\n}","index":10,"text":"def dataPrice ="}},{"result":{"nanos":2580200,"startTime":1763554548356,"endTime":1763554548359,"millis":2.5802,"status":"passed"},"step":{"line":38,"prefix":"*","index":11,"text":"karate.forEach(products, dataPrice)"}},{"result":{"nanos":882500,"startTime":1763554548359,"endTime":1763554548360,"millis":0.8825,"status":"passed"},"step":{"endLine":52,"comments":["# 3. Campos numéricos esperados si existen (capacity GB, Screen size)"],"line":41,"prefix":"*","docString":"function(item){\n  if (item.data && item.data['capacity GB'] !== undefined && typeof item.data['capacity GB'] !== 'number') {\n    karate.fail('❌ capacity GB debe ser number en id=' + item.id);\n  }\n  if (item.data && item.data['Screen size'] !== undefined && typeof item.data['Screen size'] !== 'number') {\n    karate.fail('❌ Screen size debe ser number en id=' + item.id);\n  }\n}","index":12,"text":"def dataCapacityScreenSize ="}},{"result":{"nanos":5676500,"startTime":1763554548360,"endTime":1763554548366,"millis":5.6765,"status":"passed"},"step":{"line":54,"prefix":"*","index":13,"text":"karate.forEach(products,dataCapacityScreenSize)"}},{"result":{"nanos":996800,"startTime":1763554548366,"endTime":1763554548367,"millis":0.9968,"status":"passed"},"step":{"comments":["# --- 2) PATCH parcial al producto indicado ---","# Localiza el producto objetivo antes del parche (para comparar luego)"],"line":58,"prefix":"*","index":14,"text":"def targetId = 'ff8081819782e69e019a546020375f4f'"}},{"result":{"nanos":685500,"startTime":1763554548367,"endTime":1763554548368,"millis":0.6855,"status":"passed"},"step":{"line":59,"prefix":"*","index":15,"text":"def before = response"}},{"result":{"nanos":1881400,"startTime":1763554548368,"endTime":1763554548370,"millis":1.8814,"status":"passed"},"step":{"line":60,"prefix":"*","index":16,"text":"print 'Producto ANTES del PATCH =>', before"},"stepLog":"09:15:48.370 [print] Producto ANTES del PATCH => [\n  {\n    \"id\": \"1\",\n    \"name\": \"Google Pixel 6 Pro\",\n    \"data\": {\n      \"color\": \"Cloudy White\",\n      \"capacity\": \"128 GB\"\n    }\n  },\n  {\n    \"id\": \"2\",\n    \"name\": \"Apple iPhone 12 Mini, 256GB, Blue\",\n    \"data\": null\n  },\n  {\n    \"id\": \"3\",\n    \"name\": \"Apple iPhone 12 Pro Max\",\n    \"data\": {\n      \"color\": \"Cloudy White\",\n      \"capacity GB\": 512\n    }\n  },\n  {\n    \"id\": \"4\",\n    \"name\": \"Apple iPhone 11, 64GB\",\n    \"data\": {\n      \"price\": 389.99,\n      \"color\": \"Purple\"\n    }\n  },\n  {\n    \"id\": \"5\",\n    \"name\": \"Samsung Galaxy Z Fold2\",\n    \"data\": {\n      \"price\": 689.99,\n      \"color\": \"Brown\"\n    }\n  },\n  {\n    \"id\": \"6\",\n    \"name\": \"Apple AirPods\",\n    \"data\": {\n      \"generation\": \"3rd\",\n      \"price\": 120\n    }\n  },\n  {\n    \"id\": \"7\",\n    \"name\": \"Apple MacBook Pro 16\",\n    \"data\": {\n      \"year\": 2019,\n      \"price\": 1849.99,\n      \"CPU model\": \"Intel Core i9\",\n      \"Hard disk size\": \"1 TB\"\n    }\n  },\n  {\n    \"id\": \"8\",\n    \"name\": \"Apple Watch Series 8\",\n    \"data\": {\n      \"Strap Colour\": \"Elderberry\",\n      \"Case Size\": \"41mm\"\n    }\n  },\n  {\n    \"id\": \"9\",\n    \"name\": \"Beats Studio3 Wireless\",\n    \"data\": {\n      \"Color\": \"Red\",\n      \"Description\": \"High-performance wireless noise cancelling headphones\"\n    }\n  },\n  {\n    \"id\": \"10\",\n    \"name\": \"Apple iPad Mini 5th Gen\",\n    \"data\": {\n      \"Capacity\": \"64 GB\",\n      \"Screen size\": 7.9\n    }\n  },\n  {\n    \"id\": \"11\",\n    \"name\": \"Apple iPad Mini 5th Gen\",\n    \"data\": {\n      \"Capacity\": \"254 GB\",\n      \"Screen size\": 7.9\n    }\n  },\n  {\n    \"id\": \"12\",\n    \"name\": \"Apple iPad Air\",\n    \"data\": {\n      \"Generation\": \"4th\",\n      \"Price\": \"419.99\",\n      \"Capacity\": \"64 GB\"\n    }\n  },\n  {\n    \"id\": \"13\",\n    \"name\": \"Apple iPad Air\",\n    \"data\": {\n      \"Generation\": \"4th\",\n      \"Price\": \"519.99\",\n      \"Capacity\": \"256 GB\"\n    }\n  }\n]\n \n"},{"result":{"nanos":1346900,"startTime":1763554548370,"endTime":1763554548371,"millis":1.3469,"status":"passed"},"step":{"comments":["# Construcción dinámica del payload PATCH:","# - Si el campo a parchear es en 'data', se envía { data: { <clave>: <valor> } }","# - Si es 'name', se envía { name: <valor> }"],"line":64,"prefix":"*","index":17,"text":"def patchField = 'price'"}},{"result":{"nanos":1995900,"startTime":1763554548372,"endTime":1763554548374,"millis":1.9959,"status":"passed"},"step":{"line":65,"prefix":"*","index":18,"text":"def patchValue = 399.99"}},{"result":{"nanos":778800,"startTime":1763554548373,"endTime":1763554548374,"millis":0.7788,"status":"passed"},"step":{"endLine":74,"line":66,"prefix":"*","docString":"function(field, value){\n  if (field === 'name') return { name: value };\n  var o = {};\n  o[field] = value;\n  return { data: o };\n}","index":19,"text":"def patchBody ="}},{"result":{"nanos":2833300,"startTime":1763554548374,"endTime":1763554548377,"millis":2.8333,"status":"passed"},"step":{"line":75,"prefix":"*","index":20,"text":"def body = patchBody(patchField, patchValue)"}},{"result":{"nanos":1027600,"startTime":1763554548377,"endTime":1763554548378,"millis":1.0276,"status":"passed"},"step":{"line":76,"prefix":"*","index":21,"text":"print 'PATCH body =>', body"},"stepLog":"09:15:48.378 [print] PATCH body => {\n  \"data\": {\n    \"price\": 399.99\n  }\n}\n \n"},{"result":{"nanos":455800,"startTime":1763554548378,"endTime":1763554548378,"millis":0.4558,"status":"passed"},"step":{"line":78,"prefix":"Given","index":22,"text":"path 'objects', targetId"}},{"result":{"nanos":309800,"startTime":1763554548379,"endTime":1763554548379,"millis":0.3098,"status":"passed"},"step":{"line":79,"prefix":"And","index":23,"text":"request body"}},{"result":{"nanos":571230300,"startTime":1763554548379,"endTime":1763554548950,"millis":571.2303,"status":"passed"},"step":{"line":80,"prefix":"When","index":24,"text":"method PATCH"},"stepLog":"09:15:48.382 request:\n2 > PATCH https:\/\/api.restful-api.dev\/objects\/ff8081819782e69e019a546020375f4f\n2 > Content-Type: application\/json; charset=UTF-8\n2 > Content-Length: 25\n2 > Host: api.restful-api.dev\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/25)\n2 > Accept-Encoding: gzip,deflate\n{\n  \"data\": {\n    \"price\": 399.99\n  }\n}\n\n\n09:15:48.948 response time in milliseconds: 564\n2 < 200\n2 < Date: Wed, 19 Nov 2025 12:15:50 GMT\n2 < Content-Type: application\/json\n2 < Transfer-Encoding: chunked\n2 < Connection: keep-alive\n2 < Server: cloudflare\n2 < Nel: {\"report_to\":\"cf-nel\",\"success_fraction\":0.0,\"max_age\":604800}\n2 < Vary: Origin\n2 < Vary: Access-Control-Request-Method\n2 < Vary: Access-Control-Request-Headers\n2 < cf-cache-status: DYNAMIC\n2 < Server-Timing: cfCacheStatus;desc=\"DYNAMIC\"\n2 < Server-Timing: cfEdge;dur=294,cfOrigin;dur=75\n2 < Report-To: {\"group\":\"cf-nel\",\"max_age\":604800,\"endpoints\":[{\"url\":\"https:\/\/a.nel.cloudflare.com\/report\/v4?s=30fOMDSG%2FERC3SNGqn%2BzqiJ48Eac1e3f1s%2BI%2FREPNRzfLChCAZlmnW4TKytAVqagk3wovt%2FZQP4V6TyIje%2FAp%2FLzxZTe%2F4ULmD0Bwf7ytJDM0ec%3D\"}]}\n2 < CF-RAY: 9a0fa2a2afaacb39-GIG\n2 < alt-svc: h3=\":443\"; ma=86400\n{\n  \"id\": \"ff8081819782e69e019a546020375f4f\",\n  \"name\": \"Apple MacBook X\",\n  \"updatedAt\": \"2025-11-19T12:15:50.384+00:00\",\n  \"data\": {\n    \"price\": 399.99\n  }\n}\n\n\n"},{"result":{"nanos":34100,"startTime":1763554548950,"endTime":1763554548950,"millis":0.0341,"status":"passed"},"step":{"line":81,"prefix":"Then","index":25,"text":"status 200"}},{"result":{"nanos":635900,"startTime":1763554548951,"endTime":1763554548952,"millis":0.6359,"status":"passed"},"step":{"comments":["# --- 3) Verificación por GET del recurso parchado ---"],"line":84,"prefix":"Given","index":26,"text":"path 'objects'"}},{"result":{"nanos":480400,"startTime":1763554548951,"endTime":1763554548951,"millis":0.4804,"status":"passed"},"step":{"line":85,"prefix":"And","index":27,"text":"param id = targetId"}},{"result":{"nanos":811121900,"startTime":1763554548952,"endTime":1763554549763,"millis":811.1219,"status":"passed"},"step":{"line":86,"prefix":"When","index":28,"text":"method GET"},"stepLog":"09:15:48.956 request:\n3 > GET https:\/\/api.restful-api.dev\/objects?id=ff8081819782e69e019a546020375f4f\n3 > Content-Type: application\/json; charset=UTF-8\n3 > Host: api.restful-api.dev\n3 > Connection: Keep-Alive\n3 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/25)\n3 > Accept-Encoding: gzip,deflate\n\n\n09:15:49.762 response time in milliseconds: 805\n3 < 200\n3 < Date: Wed, 19 Nov 2025 12:15:51 GMT\n3 < Content-Type: application\/json\n3 < Transfer-Encoding: chunked\n3 < Connection: keep-alive\n3 < Server: cloudflare\n3 < Nel: {\"report_to\":\"cf-nel\",\"success_fraction\":0.0,\"max_age\":604800}\n3 < Vary: Origin\n3 < Vary: Access-Control-Request-Method\n3 < Vary: Access-Control-Request-Headers\n3 < cf-cache-status: DYNAMIC\n3 < Server-Timing: cfCacheStatus;desc=\"DYNAMIC\"\n3 < Server-Timing: cfEdge;dur=493,cfOrigin;dur=64\n3 < Report-To: {\"group\":\"cf-nel\",\"max_age\":604800,\"endpoints\":[{\"url\":\"https:\/\/a.nel.cloudflare.com\/report\/v4?s=90GyaOOg4rjtTgV%2BwwIoEEKHuAYz066sgjs1dQ68I%2F7jxocOJIWEiSgWL8JL7x03LSFUHfWtpO8Kik2DaEFcNG3cOHqEullVF%2BpYi7f6kfqe7Z0%3D\"}]}\n3 < CF-RAY: 9a0fa2a62da019a4-SCL\n3 < alt-svc: h3=\":443\"; ma=86400\n[\n  {\n    \"id\": \"ff8081819782e69e019a546020375f4f\",\n    \"name\": \"Apple MacBook X\",\n    \"data\": {\n      \"price\": 399.99\n    }\n  }\n]\n\n\n"},{"result":{"nanos":18400,"startTime":1763554549763,"endTime":1763554549763,"millis":0.0184,"status":"passed"},"step":{"line":87,"prefix":"Then","index":29,"text":"status 200"}},{"result":{"nanos":2043000,"startTime":1763554549763,"endTime":1763554549765,"millis":2.043,"status":"passed"},"step":{"line":88,"prefix":"*","index":30,"text":"match response == '#[1]'"}},{"result":{"nanos":593800,"startTime":1763554549766,"endTime":1763554549767,"millis":0.5938,"status":"passed"},"step":{"line":89,"prefix":"*","index":31,"text":"def after = response[0]"}},{"result":{"nanos":187100,"startTime":1763554549766,"endTime":1763554549766,"millis":0.1871,"status":"passed"},"step":{"comments":["# Validación del valor parchado"],"line":92,"prefix":"*","index":32,"text":"if (patchField === 'name') karate.match(after.name, patchValue)"}},{"result":{"nanos":1245100,"startTime":1763554549766,"endTime":1763554549767,"millis":1.2451,"status":"passed"},"step":{"line":93,"prefix":"*","index":33,"text":"if (patchField !== 'name') karate.match(after.data[patchField], patchValue)"}},{"result":{"nanos":538100,"startTime":1763554549768,"endTime":1763554549769,"millis":0.5381,"status":"passed"},"step":{"comments":["# Validar que lo no parchado se conserve (si existía)"],"line":96,"prefix":"*","index":34,"text":"if (patchField !== 'name' && before.name) karate.match(after.name, before.name)"}},{"result":{"nanos":182400,"startTime":1763554549769,"endTime":1763554549769,"millis":0.1824,"status":"passed"},"step":{"line":97,"prefix":"*","index":35,"text":"if (patchField === 'name' && before.data) karate.match(after.data, '#object')"}}],"line":105,"description":"","durationMillis":2174.5426,"failed":false,"executorName":"main","name":"Listado completo (GET) + PATCH parcial y verificación","startTime":1763554547575,"refId":"[1.2:105]","endTime":1763554549769,"exampleData":{"patchId":"ff8081819782e69e019a546020375f4f","patchField":"price","patchValue":"399.99"},"exampleIndex":1},{"sectionIndex":0,"stepResults":[{"result":{"nanos":308000,"startTime":1763554549794,"endTime":1763554549794,"millis":0.308,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url baseUrl"}},{"result":{"nanos":393000,"startTime":1763554549795,"endTime":1763554549795,"millis":0.393,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"configure headers = { 'Content-Type': 'application\/json; charset=UTF-8' }"}},{"result":{"nanos":264500,"startTime":1763554549795,"endTime":1763554549795,"millis":0.2645,"status":"passed"},"step":{"comments":["# --- 1) GET listado completo ---"],"line":9,"prefix":"Given","index":0,"text":"path 'objects'"}},{"result":{"nanos":589105000,"startTime":1763554549795,"endTime":1763554550384,"millis":589.105,"status":"passed"},"step":{"line":10,"prefix":"When","index":1,"text":"method GET"},"stepLog":"09:15:49.798 request:\n1 > GET https:\/\/api.restful-api.dev\/objects\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Host: api.restful-api.dev\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/25)\n1 > Accept-Encoding: gzip,deflate\n\n\n09:15:50.382 response time in milliseconds: 581\n1 < 200\n1 < Date: Wed, 19 Nov 2025 12:15:51 GMT\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Connection: keep-alive\n1 < Server: cloudflare\n1 < Nel: {\"report_to\":\"cf-nel\",\"success_fraction\":0.0,\"max_age\":604800}\n1 < Vary: Origin\n1 < Vary: Access-Control-Request-Method\n1 < Vary: Access-Control-Request-Headers\n1 < cf-cache-status: DYNAMIC\n1 < Server-Timing: cfCacheStatus;desc=\"DYNAMIC\"\n1 < Server-Timing: cfEdge;dur=318,cfOrigin;dur=76\n1 < Report-To: {\"group\":\"cf-nel\",\"max_age\":604800,\"endpoints\":[{\"url\":\"https:\/\/a.nel.cloudflare.com\/report\/v4?s=sVO5UhRHoJkCcB%2FnFrpVsZts4SO0EIyGvEWLFaWuoWuZuhtLs%2Fz5Cq%2FSUKNK2O7uF3YdTCo1ZWyhnfcRwDVT2I28RipEgPyYfB20KgdHQHTl\"}]}\n1 < CF-RAY: 9a0fa2ab6e75644e-GIG\n1 < alt-svc: h3=\":443\"; ma=86400\n[\n  {\n    \"id\": \"1\",\n    \"name\": \"Google Pixel 6 Pro\",\n    \"data\": {\n      \"color\": \"Cloudy White\",\n      \"capacity\": \"128 GB\"\n    }\n  },\n  {\n    \"id\": \"2\",\n    \"name\": \"Apple iPhone 12 Mini, 256GB, Blue\",\n    \"data\": null\n  },\n  {\n    \"id\": \"3\",\n    \"name\": \"Apple iPhone 12 Pro Max\",\n    \"data\": {\n      \"color\": \"Cloudy White\",\n      \"capacity GB\": 512\n    }\n  },\n  {\n    \"id\": \"4\",\n    \"name\": \"Apple iPhone 11, 64GB\",\n    \"data\": {\n      \"price\": 389.99,\n      \"color\": \"Purple\"\n    }\n  },\n  {\n    \"id\": \"5\",\n    \"name\": \"Samsung Galaxy Z Fold2\",\n    \"data\": {\n      \"price\": 689.99,\n      \"color\": \"Brown\"\n    }\n  },\n  {\n    \"id\": \"6\",\n    \"name\": \"Apple AirPods\",\n    \"data\": {\n      \"generation\": \"3rd\",\n      \"price\": 120\n    }\n  },\n  {\n    \"id\": \"7\",\n    \"name\": \"Apple MacBook Pro 16\",\n    \"data\": {\n      \"year\": 2019,\n      \"price\": 1849.99,\n      \"CPU model\": \"Intel Core i9\",\n      \"Hard disk size\": \"1 TB\"\n    }\n  },\n  {\n    \"id\": \"8\",\n    \"name\": \"Apple Watch Series 8\",\n    \"data\": {\n      \"Strap Colour\": \"Elderberry\",\n      \"Case Size\": \"41mm\"\n    }\n  },\n  {\n    \"id\": \"9\",\n    \"name\": \"Beats Studio3 Wireless\",\n    \"data\": {\n      \"Color\": \"Red\",\n      \"Description\": \"High-performance wireless noise cancelling headphones\"\n    }\n  },\n  {\n    \"id\": \"10\",\n    \"name\": \"Apple iPad Mini 5th Gen\",\n    \"data\": {\n      \"Capacity\": \"64 GB\",\n      \"Screen size\": 7.9\n    }\n  },\n  {\n    \"id\": \"11\",\n    \"name\": \"Apple iPad Mini 5th Gen\",\n    \"data\": {\n      \"Capacity\": \"254 GB\",\n      \"Screen size\": 7.9\n    }\n  },\n  {\n    \"id\": \"12\",\n    \"name\": \"Apple iPad Air\",\n    \"data\": {\n      \"Generation\": \"4th\",\n      \"Price\": \"419.99\",\n      \"Capacity\": \"64 GB\"\n    }\n  },\n  {\n    \"id\": \"13\",\n    \"name\": \"Apple iPad Air\",\n    \"data\": {\n      \"Generation\": \"4th\",\n      \"Price\": \"519.99\",\n      \"Capacity\": \"256 GB\"\n    }\n  }\n]\n\n\n"},{"result":{"nanos":32800,"startTime":1763554550384,"endTime":1763554550384,"millis":0.0328,"status":"passed"},"step":{"line":11,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":1191300,"startTime":1763554550384,"endTime":1763554550385,"millis":1.1913,"status":"passed"},"step":{"comments":["# Validar que la respuesta es una lista (posiblemente vacía)"],"line":13,"prefix":"*","index":3,"text":"match response == '#[]'"}},{"result":{"nanos":639900,"startTime":1763554550386,"endTime":1763554550387,"millis":0.6399,"status":"passed"},"step":{"line":14,"prefix":"*","index":4,"text":"def products = response"}},{"result":{"nanos":33729900,"startTime":1763554550386,"endTime":1763554550420,"millis":33.7299,"status":"passed"},"step":{"comments":["# Validar que todas las entradas tienen la estructura esperada y data sea un objeto","#* match each products contains { id: '#string', name: '#string', data: '#object' }","# Validar que todas las entradas tienen la estructura esperada y data sea un objeto opcional, es decir puede venir null"],"line":19,"prefix":"*","index":5,"text":"match each products contains { id: '#string', name: '#string', data: '##object' }"}},{"result":{"nanos":6352000,"startTime":1763554550421,"endTime":1763554550427,"millis":6.352,"status":"passed"},"step":{"comments":["# Reglas de integridad con loops y condicionales","# 1. IDs únicos y numéricos"],"line":23,"prefix":"*","index":6,"text":"def ids = products.map(x => x.id)"}},{"result":{"nanos":1862300,"startTime":1763554550428,"endTime":1763554550430,"millis":1.8623,"status":"passed"},"step":{"line":24,"prefix":"*","index":7,"text":"def uniqueIds = karate.distinct(ids)"}},{"result":{"nanos":500100,"startTime":1763554550430,"endTime":1763554550431,"millis":0.5001,"status":"passed"},"step":{"line":25,"prefix":"*","index":8,"text":"if (ids.length != uniqueIds.length) karate.fail('❌ IDs duplicados en listado')"}},{"result":{"nanos":12685800,"startTime":1763554550430,"endTime":1763554550443,"millis":12.6858,"status":"passed"},"step":{"line":26,"prefix":"*","index":9,"text":"karate.forEach(ids, function(v){ if (!\/^[0-9]+$\/.test(v)) karate.fail('❌ ID no numérico: ' + v) })"}},{"result":{"nanos":1982500,"startTime":1763554550443,"endTime":1763554550445,"millis":1.9825,"status":"passed"},"step":{"endLine":37,"comments":["# 2. data.price > 0 cuando price es #number"],"line":30,"prefix":"*","docString":"function(item){\n  if (item.data && typeof item.data.price === 'number' && !(item.data.price > 0)) {\n    karate.fail('❌ price inválido para id=' + item.id + ' -> ' + item.data.price);\n  }\n}","index":10,"text":"def dataPrice ="}},{"result":{"nanos":6196300,"startTime":1763554550445,"endTime":1763554550451,"millis":6.1963,"status":"passed"},"step":{"line":38,"prefix":"*","index":11,"text":"karate.forEach(products, dataPrice)"}},{"result":{"nanos":1762700,"startTime":1763554550452,"endTime":1763554550454,"millis":1.7627,"status":"passed"},"step":{"endLine":52,"comments":["# 3. Campos numéricos esperados si existen (capacity GB, Screen size)"],"line":41,"prefix":"*","docString":"function(item){\n  if (item.data && item.data['capacity GB'] !== undefined && typeof item.data['capacity GB'] !== 'number') {\n    karate.fail('❌ capacity GB debe ser number en id=' + item.id);\n  }\n  if (item.data && item.data['Screen size'] !== undefined && typeof item.data['Screen size'] !== 'number') {\n    karate.fail('❌ Screen size debe ser number en id=' + item.id);\n  }\n}","index":12,"text":"def dataCapacityScreenSize ="}},{"result":{"nanos":4936600,"startTime":1763554550454,"endTime":1763554550459,"millis":4.9366,"status":"passed"},"step":{"line":54,"prefix":"*","index":13,"text":"karate.forEach(products,dataCapacityScreenSize)"}},{"result":{"nanos":713100,"startTime":1763554550459,"endTime":1763554550460,"millis":0.7131,"status":"passed"},"step":{"comments":["# --- 2) PATCH parcial al producto indicado ---","# Localiza el producto objetivo antes del parche (para comparar luego)"],"line":58,"prefix":"*","index":14,"text":"def targetId = 'ff8081819782e69e019a546020375f4f'"}},{"result":{"nanos":403200,"startTime":1763554550459,"endTime":1763554550459,"millis":0.4032,"status":"passed"},"step":{"line":59,"prefix":"*","index":15,"text":"def before = response"}},{"result":{"nanos":1208600,"startTime":1763554550461,"endTime":1763554550462,"millis":1.2086,"status":"passed"},"step":{"line":60,"prefix":"*","index":16,"text":"print 'Producto ANTES del PATCH =>', before"},"stepLog":"09:15:50.462 [print] Producto ANTES del PATCH => [\n  {\n    \"id\": \"1\",\n    \"name\": \"Google Pixel 6 Pro\",\n    \"data\": {\n      \"color\": \"Cloudy White\",\n      \"capacity\": \"128 GB\"\n    }\n  },\n  {\n    \"id\": \"2\",\n    \"name\": \"Apple iPhone 12 Mini, 256GB, Blue\",\n    \"data\": null\n  },\n  {\n    \"id\": \"3\",\n    \"name\": \"Apple iPhone 12 Pro Max\",\n    \"data\": {\n      \"color\": \"Cloudy White\",\n      \"capacity GB\": 512\n    }\n  },\n  {\n    \"id\": \"4\",\n    \"name\": \"Apple iPhone 11, 64GB\",\n    \"data\": {\n      \"price\": 389.99,\n      \"color\": \"Purple\"\n    }\n  },\n  {\n    \"id\": \"5\",\n    \"name\": \"Samsung Galaxy Z Fold2\",\n    \"data\": {\n      \"price\": 689.99,\n      \"color\": \"Brown\"\n    }\n  },\n  {\n    \"id\": \"6\",\n    \"name\": \"Apple AirPods\",\n    \"data\": {\n      \"generation\": \"3rd\",\n      \"price\": 120\n    }\n  },\n  {\n    \"id\": \"7\",\n    \"name\": \"Apple MacBook Pro 16\",\n    \"data\": {\n      \"year\": 2019,\n      \"price\": 1849.99,\n      \"CPU model\": \"Intel Core i9\",\n      \"Hard disk size\": \"1 TB\"\n    }\n  },\n  {\n    \"id\": \"8\",\n    \"name\": \"Apple Watch Series 8\",\n    \"data\": {\n      \"Strap Colour\": \"Elderberry\",\n      \"Case Size\": \"41mm\"\n    }\n  },\n  {\n    \"id\": \"9\",\n    \"name\": \"Beats Studio3 Wireless\",\n    \"data\": {\n      \"Color\": \"Red\",\n      \"Description\": \"High-performance wireless noise cancelling headphones\"\n    }\n  },\n  {\n    \"id\": \"10\",\n    \"name\": \"Apple iPad Mini 5th Gen\",\n    \"data\": {\n      \"Capacity\": \"64 GB\",\n      \"Screen size\": 7.9\n    }\n  },\n  {\n    \"id\": \"11\",\n    \"name\": \"Apple iPad Mini 5th Gen\",\n    \"data\": {\n      \"Capacity\": \"254 GB\",\n      \"Screen size\": 7.9\n    }\n  },\n  {\n    \"id\": \"12\",\n    \"name\": \"Apple iPad Air\",\n    \"data\": {\n      \"Generation\": \"4th\",\n      \"Price\": \"419.99\",\n      \"Capacity\": \"64 GB\"\n    }\n  },\n  {\n    \"id\": \"13\",\n    \"name\": \"Apple iPad Air\",\n    \"data\": {\n      \"Generation\": \"4th\",\n      \"Price\": \"519.99\",\n      \"Capacity\": \"256 GB\"\n    }\n  }\n]\n \n"},{"result":{"nanos":972200,"startTime":1763554550462,"endTime":1763554550463,"millis":0.9722,"status":"passed"},"step":{"comments":["# Construcción dinámica del payload PATCH:","# - Si el campo a parchear es en 'data', se envía { data: { <clave>: <valor> } }","# - Si es 'name', se envía { name: <valor> }"],"line":64,"prefix":"*","index":17,"text":"def patchField = 'capacity GB'"}},{"result":{"nanos":953500,"startTime":1763554550463,"endTime":1763554550464,"millis":0.9535,"status":"passed"},"step":{"line":65,"prefix":"*","index":18,"text":"def patchValue = 1024"}},{"result":{"nanos":503200,"startTime":1763554550464,"endTime":1763554550465,"millis":0.5032,"status":"passed"},"step":{"endLine":74,"line":66,"prefix":"*","docString":"function(field, value){\n  if (field === 'name') return { name: value };\n  var o = {};\n  o[field] = value;\n  return { data: o };\n}","index":19,"text":"def patchBody ="}},{"result":{"nanos":1734700,"startTime":1763554550465,"endTime":1763554550467,"millis":1.7347,"status":"passed"},"step":{"line":75,"prefix":"*","index":20,"text":"def body = patchBody(patchField, patchValue)"}},{"result":{"nanos":987400,"startTime":1763554550466,"endTime":1763554550467,"millis":0.9874,"status":"passed"},"step":{"line":76,"prefix":"*","index":21,"text":"print 'PATCH body =>', body"},"stepLog":"09:15:50.467 [print] PATCH body => {\n  \"data\": {\n    \"capacity GB\": 1024\n  }\n}\n \n"},{"result":{"nanos":735100,"startTime":1763554550467,"endTime":1763554550468,"millis":0.7351,"status":"passed"},"step":{"line":78,"prefix":"Given","index":22,"text":"path 'objects', targetId"}},{"result":{"nanos":203300,"startTime":1763554550468,"endTime":1763554550468,"millis":0.2033,"status":"passed"},"step":{"line":79,"prefix":"And","index":23,"text":"request body"}},{"result":{"nanos":732444500,"startTime":1763554550468,"endTime":1763554551200,"millis":732.4445,"status":"passed"},"step":{"line":80,"prefix":"When","index":24,"text":"method PATCH"},"stepLog":"09:15:50.470 request:\n2 > PATCH https:\/\/api.restful-api.dev\/objects\/ff8081819782e69e019a546020375f4f\n2 > Content-Type: application\/json; charset=UTF-8\n2 > Content-Length: 29\n2 > Host: api.restful-api.dev\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/25)\n2 > Accept-Encoding: gzip,deflate\n{\n  \"data\": {\n    \"capacity GB\": 1024\n  }\n}\n\n\n09:15:51.200 response time in milliseconds: 728\n2 < 200\n2 < Date: Wed, 19 Nov 2025 12:15:52 GMT\n2 < Content-Type: application\/json\n2 < Transfer-Encoding: chunked\n2 < Connection: keep-alive\n2 < Server: cloudflare\n2 < Nel: {\"report_to\":\"cf-nel\",\"success_fraction\":0.0,\"max_age\":604800}\n2 < Vary: Origin\n2 < Vary: Access-Control-Request-Method\n2 < Vary: Access-Control-Request-Headers\n2 < cf-cache-status: DYNAMIC\n2 < Server-Timing: cfCacheStatus;desc=\"DYNAMIC\"\n2 < Server-Timing: cfEdge;dur=348,cfOrigin;dur=89\n2 < Report-To: {\"group\":\"cf-nel\",\"max_age\":604800,\"endpoints\":[{\"url\":\"https:\/\/a.nel.cloudflare.com\/report\/v4?s=6kb33BKiy2RpHd5xzMNuI1pHJ50Mdg15tn2fjqxF0A7SPnfxiPTJWc2ahLhmNAixpSV4yq9MLZT4QIrLLmfObj%2BVnjr8%2FftUghAgZdrWNZmq\"}]}\n2 < CF-RAY: 9a0fa2af8bcce9b6-SCL\n2 < alt-svc: h3=\":443\"; ma=86400\n{\n  \"id\": \"ff8081819782e69e019a546020375f4f\",\n  \"name\": \"Apple MacBook X\",\n  \"updatedAt\": \"2025-11-19T12:15:52.490+00:00\",\n  \"data\": {\n    \"capacity GB\": 1024\n  }\n}\n\n\n"},{"result":{"nanos":18900,"startTime":1763554551201,"endTime":1763554551201,"millis":0.0189,"status":"passed"},"step":{"line":81,"prefix":"Then","index":25,"text":"status 200"}},{"result":{"nanos":326600,"startTime":1763554551201,"endTime":1763554551201,"millis":0.3266,"status":"passed"},"step":{"comments":["# --- 3) Verificación por GET del recurso parchado ---"],"line":84,"prefix":"Given","index":26,"text":"path 'objects'"}},{"result":{"nanos":226900,"startTime":1763554551202,"endTime":1763554551202,"millis":0.2269,"status":"passed"},"step":{"line":85,"prefix":"And","index":27,"text":"param id = targetId"}},{"result":{"nanos":691952300,"startTime":1763554551202,"endTime":1763554551894,"millis":691.9523,"status":"passed"},"step":{"line":86,"prefix":"When","index":28,"text":"method GET"},"stepLog":"09:15:51.204 request:\n3 > GET https:\/\/api.restful-api.dev\/objects?id=ff8081819782e69e019a546020375f4f\n3 > Content-Type: application\/json; charset=UTF-8\n3 > Host: api.restful-api.dev\n3 > Connection: Keep-Alive\n3 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/25)\n3 > Accept-Encoding: gzip,deflate\n\n\n09:15:51.892 response time in milliseconds: 686\n3 < 200\n3 < Date: Wed, 19 Nov 2025 12:15:53 GMT\n3 < Content-Type: application\/json\n3 < Transfer-Encoding: chunked\n3 < Connection: keep-alive\n3 < Server: cloudflare\n3 < Nel: {\"report_to\":\"cf-nel\",\"success_fraction\":0.0,\"max_age\":604800}\n3 < Vary: Origin\n3 < Vary: Access-Control-Request-Method\n3 < Vary: Access-Control-Request-Headers\n3 < cf-cache-status: DYNAMIC\n3 < Server-Timing: cfCacheStatus;desc=\"DYNAMIC\"\n3 < Server-Timing: cfEdge;dur=424,cfOrigin;dur=77\n3 < Report-To: {\"group\":\"cf-nel\",\"max_age\":604800,\"endpoints\":[{\"url\":\"https:\/\/a.nel.cloudflare.com\/report\/v4?s=LzmXPNpCVj7j2TG8FewcCgn%2FVnFYVMRZfdlRKI5mQDyHRCYvtmUF8PkURx7xFn%2Ft0km0iXCzPNttQQzuDzm79YNNMqD6nPgqEPI1wbgtrmue\"}]}\n3 < CF-RAY: 9a0fa2b41a0cb4e0-SCL\n3 < alt-svc: h3=\":443\"; ma=86400\n[\n  {\n    \"id\": \"ff8081819782e69e019a546020375f4f\",\n    \"name\": \"Apple MacBook X\",\n    \"data\": {\n      \"capacity GB\": 1024\n    }\n  }\n]\n\n\n"},{"result":{"nanos":32600,"startTime":1763554551893,"endTime":1763554551893,"millis":0.0326,"status":"passed"},"step":{"line":87,"prefix":"Then","index":29,"text":"status 200"}},{"result":{"nanos":4114500,"startTime":1763554551893,"endTime":1763554551897,"millis":4.1145,"status":"passed"},"step":{"line":88,"prefix":"*","index":30,"text":"match response == '#[1]'"}},{"result":{"nanos":1346100,"startTime":1763554551898,"endTime":1763554551899,"millis":1.3461,"status":"passed"},"step":{"line":89,"prefix":"*","index":31,"text":"def after = response[0]"}},{"result":{"nanos":413700,"startTime":1763554551900,"endTime":1763554551900,"millis":0.4137,"status":"passed"},"step":{"comments":["# Validación del valor parchado"],"line":92,"prefix":"*","index":32,"text":"if (patchField === 'name') karate.match(after.name, patchValue)"}},{"result":{"nanos":1769400,"startTime":1763554551900,"endTime":1763554551902,"millis":1.7694,"status":"passed"},"step":{"line":93,"prefix":"*","index":33,"text":"if (patchField !== 'name') karate.match(after.data[patchField], patchValue)"}},{"result":{"nanos":721600,"startTime":1763554551902,"endTime":1763554551903,"millis":0.7216,"status":"passed"},"step":{"comments":["# Validar que lo no parchado se conserve (si existía)"],"line":96,"prefix":"*","index":34,"text":"if (patchField !== 'name' && before.name) karate.match(after.name, before.name)"}},{"result":{"nanos":402100,"startTime":1763554551903,"endTime":1763554551903,"millis":0.4021,"status":"passed"},"step":{"line":97,"prefix":"*","index":35,"text":"if (patchField === 'name' && before.data) karate.match(after.data, '#object')"}}],"line":108,"description":"","durationMillis":2104.1262,"failed":false,"executorName":"main","name":"Listado completo (GET) + PATCH parcial y verificación","startTime":1763554549790,"refId":"[1.3:108]","endTime":1763554551904,"exampleData":{"patchId":"ff8081819782e69e019a546020375f4f","patchField":"capacity GB","patchValue":"1024"},"exampleIndex":2}],"callDepth":0,"name":"Validar listado de productos y realizar PATCH con DDT","description":"","resultDate":"2025-11-19 09:15:51 AM","durationMillis":7590.2329,"passedCount":3}